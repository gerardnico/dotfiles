#!/usr/bin/env bash
# Git wrapper to be called by Idea to get the environment to have
# * ssh key working (ssh agent)
# * all git hook working such as `commitlint`
#
# By default, Idea call git with the wsl cli from windows (ie Intellij)
# ie wsl git
#
# In settings, you can change that
#

if [ -d "$HOME/.profile.d" ]; then
  # All file loaded in a directory should have a sh extension
  # This is how /etc/profile also work
  for file in "$HOME"/.profile.d/*.sh; do
    # shellcheck disable=SC1090
    [ -r "$file" ] && source "$file"
  done
  unset file
fi


# We select the second in path order
# We take the second in order of priority
# Why? we may get git from brew
"$(which -a git | sed -n '2p')" "$@"
