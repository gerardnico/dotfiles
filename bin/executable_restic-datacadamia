#!/bin/bash

# flag
# e - Exit if any error
# u - Treat unset variables as an error when substituting
# o pipefail - the return value of a pipeline is the status of the last command to exit with a non-zero status or zero if no command exited with a non-zero status
# E - the ERR trap is inherited by shell functions
set -Eeuo pipefail


RESTIC_PASSWORD=$RESTIC_PASSWORD \
 RESTIC_REPOSITORY=$RESTIC_REPOSITORY/datacadamia \
 AWS_SECRET_ACCESS_KEY=$RESTIC_AWS_SECRET_ACCESS_KEY \
 AWS_ACCESS_KEY_ID=$RESTIC_AWS_ACCESS_KEY_ID \
 /usr/bin/restic "$@"
